<!doctype html>
<html lang="uk">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>Uklon ‚Äî –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤</title>

<style>
  :root{
    --bg:#f2f4f7;
    --card:#ffffff;
    --accent:#0066ff;
    --green:#c8f5c2;
    --red:#ffd4d4;
    --good:#0c7a27;
    --bad:#a80000;
    --muted:#6b6b6b;
  }

  body{
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
    background:var(--bg);
    margin:0;
    padding:0;
  }

  .wrap{max-width:600px;margin:0 auto;padding:16px;}
  h1{text-align:center;margin:0 0 16px;font-size:22px;font-weight:700;}

  .card{
    background:var(--card);
    border-radius:16px;
    padding:18px;
    box-shadow:0 6px 18px rgba(0,0,0,0.06);
    margin-bottom:16px;
  }

  label{font-size:15px;color:var(--muted);margin-bottom:6px;display:block;}

  input[type="number"]{
    width:100%;
    padding:14px 12px;
    font-size:18px;
    border-radius:12px;
    border:1px solid #d8dce3;
    margin-bottom:12px;
    box-sizing:border-box;
  }

  input[type="number"]:focus{
    outline:none;
    border-color:var(--accent);
    box-shadow:0 0 0 2px rgba(0,102,255,0.2);
  }

  .btn{
    width:100%;
    padding:14px;
    border-radius:12px;
    background:var(--accent);
    border:0;
    color:white;
    font-size:18px;
    font-weight:600;
  }

  .results{display:flex;flex-direction:column;gap:16px;}

  .panel{
    background:#fff;
    border-radius:16px;
    padding:16px;
    border:1px solid #e7e9ee;
  }

  .panel h3{margin:0 0 10px;font-size:18px;}

  .line{
    display:flex;
    justify-content:space-between;
    padding:8px 0;
    font-size:16px;
    border-top:1px solid #eee;
  }
  .line:first-of-type{border-top:0;padding-top:0;}

  .val{font-weight:700;}

  .diff{
    padding:6px 12px;
    border-radius:10px;
    min-width:90px;
    text-align:center;
    display:inline-block;
    font-weight:600;
  }

  .zero{
    background:#f4f4f4;
    border:1px dashed #ccc;
    color:#555;
  }

  textarea{
  width: 100%;
  margin: 10px 0 10px 0;   /* ‚Üê –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É */
  height: 140px;
  border-radius: 10px;
  padding: 10px;
  font-size: 14px;
  border: 1px solid #ddd;
  box-sizing: border-box;
  display: block;             /* ‚Üê –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ */
}

  .row{display:flex;gap:10px;}
  .small-btn{padding:8px 12px;border-radius:8px;border:0;background:#eee;cursor:pointer}
</style>
</head>

<body>
<div class="wrap">
  <h1>–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤ Uklon</h1>

  <div class="card">
    <label>–§–∞–∫—Ç–∏—á–Ω–∞ —Å—É–º–∞, –≥—Ä–Ω</label>
    <input id="actual" type="number" inputmode="decimal" placeholder="–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ 155">

    <label>–ü—Ä–æ–±—ñ–≥, –∫–º</label>
    <input id="distance" type="number" inputmode="decimal" step="0.01" placeholder="–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ 3.0">

    <label>–ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç</label>
    <input id="coef" type="number" inputmode="decimal" step="0.01" placeholder="–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ 1.06">

    <button class="btn" id="calcBtn">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏</button>
  </div>

  <div class="results">

    <div class="panel">
      <h3>–°—Ç–∞–Ω–¥–∞—Ä—Ç</h3>
      <div class="line"><span>–†–æ–∑—Ä–∞—Ö—É–Ω–∫–æ–≤–∞ —Å—É–º–∞</span><span class="val" id="stdCalc">‚Äî</span></div>
      <div class="line"><span>–†—ñ–∑–Ω–∏—Ü—è</span><span class="diff zero" id="stdDiff">‚Äî</span></div>
      <textarea id="stdMsg" placeholder="–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –∑ º—è–≤–∏—Ç—å—Å—è —Ç—É—Ç"></textarea>
      <button class="small-btn" id="copyStd">–ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
    </div>

    <div class="panel">
      <h3>–ö–æ–º—Ñ–æ—Ä—Ç</h3>
      <div class="line"><span>–†–æ–∑—Ä–∞—Ö—É–Ω–∫–æ–≤–∞ —Å—É–º–∞</span><span class="val" id="cfCalc">‚Äî</span></div>
      <div class="line"><span>–†—ñ–∑–Ω–∏—Ü—è</span><span class="diff zero" id="cfDiff">‚Äî</span></div>
      <textarea id="cfMsg" placeholder="–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –∑ º—è–≤–∏—Ç—å—Å—è —Ç—É—Ç"></textarea>
      <button class="small-btn" id="copyCf">–ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
    </div>

    <div class="panel">
      <h3>–ë—ñ–∑–Ω–µ—Å</h3>
      <div class="line"><span>–†–æ–∑—Ä–∞—Ö—É–Ω–∫–æ–≤–∞ —Å—É–º–∞</span><span class="val" id="bizCalc">‚Äî</span></div>
      <div class="line"><span>–†—ñ–∑–Ω–∏—Ü—è</span><span class="diff zero" id="bizDiff">‚Äî</span></div>
      <textarea id="bizMsg" placeholder="–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –∑ º—è–≤–∏—Ç—å—Å—è —Ç—É—Ç"></textarea>
      <button class="small-btn" id="copyBiz">–ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
    </div>

  </div>
</div>

<script>
const STD = {minKm:1.9, base:100, perKm:17.6, name:"–°—Ç–∞–Ω–¥–∞—Ä—Ç"};
const CFM = {minKm:2.1, base:115, perKm:19.8, name:"–ö–æ–º—Ñ–æ—Ä—Ç"};
const BIZ = {minKm:1.6, base:140, perKm:23.5, name:"–ë—ñ–∑–Ω–µ—Å"};

// —Ä–∞—Å—á—ë—Ç —Ç–∞—Ä–∏—Ñ–∞
function calcFare(km, t){
  return km <= t.minKm ? t.base : t.base + (km - t.minKm) * t.perKm;
}

// —Ñ–æ—Ä–º–∞—Ç —Å—É–º–º—ã
function fmt(x){
  return isNaN(x) ? "‚Äî" : x.toFixed(2) + " ‚Ç¥";
}

// —Ä–∞—Å–∫—Ä–∞—Å–∫–∞ —Ä–∞–∑–Ω–∏—Ü—ã
function colorize(el, v){
  el.className = "diff";
  if(isNaN(v)){
    el.classList.add("zero");
    el.textContent = "‚Äî";
    return;
  }

  el.textContent = v.toFixed(2) + " ‚Ç¥";

  if(v > 0){
    el.style.background = "var(--green)";
    el.style.color = "var(--good)";
  } 
  else if(v < 0){
    el.style.background = "var(--red)";
    el.style.color = "var(--bad)";
  }
  else {
    el.classList.add("zero");
  }
}

// —Ñ–æ—Ä–º—É–ª–∞ –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä—Å–∫–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
function breakdownString(km, coef, t){
  if(km <= t.minKm) return `${t.base} √ó ${coef}`;
  return `(${t.base} + (${km} - ${t.minKm}) √ó ${t.perKm}) √ó ${coef}`;
}

// —Ñ—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏
function getGreeting() {
  const h = new Date().getHours();

  if (h >= 5 && h < 12) return "–î–æ–±—Ä–æ–≥–æ —Ä–∞–Ω–∫—É!üå§Ô∏è";
  if (h >= 12 && h < 17) return "–î–æ–±—Ä–æ–≥–æ –¥–Ω—è!üå§Ô∏è";
  if (h >= 17 && h < 23) return "–î–æ–±—Ä–æ–≥–æ –≤–µ—á–æ—Ä–∞!üåô‚ú®";
  return "–î–æ–±—Ä–æ—ó –Ω–æ—á—ñ!‚ú®üåô";
}

// –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
function genMsg(t, km, coef, actual){
  const calcTotal = calcFare(km, t) * coef;
  const diff = calcTotal - actual;

  if(diff <= 0) return "";

  const breakdown = breakdownString(km, coef, t);
  const greeting = getGreeting();

  return `${greeting} 
–ü—Ä–æ—à—É –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫ –≤–∞—Ä—Ç–æ—Å—Ç—ñ –ø–æ—ó–∑–¥–∫–∏.
–†–æ–∑—Ä–∞—Ö—É–Ω–∫–æ–≤–∞ —Å—É–º–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—å ${calcTotal.toFixed(2)} –≥—Ä–Ω (${breakdown}).
–§–∞–∫—Ç–∏—á–Ω–∞ ‚Äî ${actual.toFixed(2)} –≥—Ä–Ω.
–ü—Ä–æ—à—É –¥–æ–Ω–∞—Ä–∞—Ö—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω–∏—Ü—é —É —Ä–æ–∑–º—ñ—Ä—ñ ${diff.toFixed(2)} –≥—Ä–Ω.
–©–∏—Ä–æ –¥—è–∫—É—é!ü§ó`;
}

// –ø—Ä–∏–≤—è–∑–∫–∞ –∫–Ω–æ–ø–∫–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
function bindCopy(btnId, taId){
  const btn = document.getElementById(btnId);
  btn.onclick = function(){
    const t = document.getElementById(taId);
    if(!t.value){
      alert('–ù–µ–º–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è');
      return;
    }
    t.select();
    t.setSelectionRange(0, 99999);
    navigator.clipboard.writeText(t.value).then(
      () => alert('–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ'),
      () => { document.execCommand('copy'); alert('–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ'); }
    );
  };
}

// –ø—Ä–∏–≤—è–∑–∫–∞ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
bindCopy('copyStd','stdMsg');
bindCopy('copyCf','cfMsg');
bindCopy('copyBiz','bizMsg');

// –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏"
document.getElementById("calcBtn").onclick = function(){
  const actual = parseFloat(document.getElementById("actual").value);
  const km = parseFloat(document.getElementById("distance").value);
  const coef = parseFloat(document.getElementById("coef").value);

  if(isNaN(km) || isNaN(coef) || isNaN(actual)){
    alert("–í–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω—ñ –¥–∞–Ω—ñ");
    return;
  }

  // —Ä–∞—Å—á–µ—Ç –ø–æ —Ç–∞—Ä–∏—Ñ–∞–º
  const totals = {
    std: calcFare(km, STD) * coef,
    cf: calcFare(km, CFM) * coef,
    biz: calcFare(km, BIZ) * coef
  };

  // –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å—É–º–º
  document.getElementById("stdCalc").textContent = fmt(totals.std);
  document.getElementById("cfCalc").textContent = fmt(totals.cf);
  document.getElementById("bizCalc").textContent = fmt(totals.biz);

  // —Ä–∞–∑–Ω–∏—Ü—ã (actual - calc)
  colorize(document.getElementById("stdDiff"), actual - totals.std);
  colorize(document.getElementById("cfDiff"), actual - totals.cf);
  colorize(document.getElementById("bizDiff"), actual - totals.biz);

  // –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
  document.getElementById('stdMsg').value = genMsg(STD, km, coef, actual);
  document.getElementById('cfMsg').value = genMsg(CFM, km, coef, actual);
  document.getElementById('bizMsg').value = genMsg(BIZ, km, coef, actual);
};
</script>
</body>
</html>
